(function(){var t;t=function($,t){var e;return e=this,this.$field=t,this.$opener=t.find(".opener-button"),this.$button=t.find(".opener-button a"),this.$copy=t.find(".opener-button .copy"),this.$text=t.find(".opener-button a span"),this.$download=t.find(".opener-button a.opener-download"),this.useDownloadLink=this.$opener.hasClass("download"),this.refresh=this.$opener.hasClass("refresh"),this.delay=parseInt(this.$opener.attr("data-delay")),this.jsoncode=String(this.$opener.attr("data-jsoncode")),this.jsonmessage=String(this.$opener.attr("data-jsonmessage")),this.jsonfileurl=String(this.$opener.attr("data-jsonfileurl")),this.l={default:this.$text.attr("data-textdefault"),progress:this.$text.attr("data-textprogress"),success:this.$text.attr("data-textsuccess"),error:this.$text.attr("data-texterror"),confirm:this.$text.attr("data-textconfirm")},this.parseResult=function(t){200===t[this.jsoncode]?e.hasSuccess(t[this.jsonmessage],t[this.jsonfileurl]):e.hasError(t.error,t[this.jsonmessage])},this.hasError=function(t,n){void 0!==n&&0!==n.trim().length||(n=e.l.error),void 0!==n&&0!==n.trim().length||(n=t),e.$button.addClass("btn-negative").children("span").text(n),setTimeout(function(){return e.$button.removeClass("btn-negative"),e.$button.children("span").text(e.l.default),e.$download.attr("href",""),e.$download.attr("download","")},e.delay)},this.hasSuccess=function(t,n){var o;void 0!==t&&0!==t.trim().length||(t=e.l.success),e.$button.addClass("btn-positive"),e.$button.children("span").text(t),void 0!==n&&n.trim().length>0&&(e.useDownloadLink?(o=n.split("/").pop(),e.$download.attr("href",n),e.$download.attr("download",o),e.$download[0].click()):window.open(n)),setTimeout(function(){if(e.$button.removeClass("btn-positive"),e.$button.children("span").text(e.l.default),e.$download.attr("href",""),e.$download.attr("download",""),e.refresh)return window.location.reload(!0)},e.delay)},this.init=function(){},this.copyToClipboard=function(t){var e,n,o,s,a,r,i,d;d="_hiddenCopyText_",o="INPUT"===t.tagName||"TEXTAREA"===t.tagName,a=void 0,s=void 0,o?(i=t,a=t.selectionStart,s=t.selectionEnd):(i=document.getElementById(d),i||(i=document.createElement("textarea"),i.style.position="absolute",i.style.left="-9999px",i.style.top="0",i.id=d,document.body.appendChild(i)),i.textContent=t.textContent),e=document.activeElement,i.focus(),i.setSelectionRange(0,i.value.length),r=void 0;try{r=document.execCommand("copy")}catch(t){n=t,r=!1}return e&&"function"==typeof e.focus&&e.focus(),o?t.setSelectionRange(a,s):i.textContent="",r},this.$field.find("a.opener").click(function(t){var n,o;t.preventDefault(),n=!0,e.$opener.hasClass("confirm")&&(n=confirm(e.l.confirm)),n&&(e.$opener.hasClass("no-ajax")?window.open(e.$button.attr("href")):e.$opener.hasClass("copy-clipboard")?(e.$copy.removeClass("jquery-hide"),e.copyToClipboard(e.$copy.get(0))?e.hasSuccess():(e.hasError(),window.open(e.$button.attr("href"))),e.$copy.addClass("jquery-hide")):(o=$(this).attr("name"),$.fn.OpenerAjax(e,$(this).attr("href")+"/panel:1")))}),this.init()},function($){$.fn.OpenerAjax=function(t,e){void 0!==t.$field&&(t.$field.hasClass("ajax")||(t.$field.addClass("ajax"),document.body.style.cursor="wait",t.$button.children("span").text(t.l.progress),$.ajax({url:e,type:"GET",success:function(e){return t.parseResult(e)},error:function(e,n,o){return t.hasError(n+o)},complete:function(){return t.$field.removeClass("ajax"),document.body.style.cursor="default"}})))},$.fn.opener=function(){return new t($,this)}}(jQuery)}).call(this);